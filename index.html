<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ë–¡ìë°©ë²”ëŒ€ ì •ë³´ ì„¼í„°</title>
  <style>
    :root{
      --card:#ffffff; --ink:#0f172a; --muted:#475569; --accent:#22c55e; --border:#e5e7eb;
      --company:#3b82f6; --civil:#16a34a; --org:#8b5cf6; --magazine:#f97316;
      --up:#16a34a; --down:#dc2626; --e:cubic-bezier(.22,.9,.24,1);
    }

    /* â˜… ì „ì—­ ë°•ìŠ¤ì‚¬ì´ì§• */
    html { box-sizing: border-box; font-size:17px; overflow-y:scroll; }
    *, *::before, *::after { box-sizing: inherit; }

    body{margin:0;font-family:"Noto Sans KR",system-ui,-apple-system,Segoe UI,Roboto,sans-serif;color:var(--ink);background:#f0fdf4;line-height:1.6}

    /* í—¤ë” */
    header{background:#fff;border-bottom:1px solid var(--border);padding:20px;text-align:center;box-shadow:0 2px 6px rgba(0,0,0,.05)}
    header h1{margin:0;font-size:30px;color:var(--accent);font-weight:900;cursor:pointer;transition:transform .2s var(--e)}
    header h1:hover{transform:scale(1.02)}

    /* ë ˆì´ì•„ì›ƒ */
    .layout{display:grid;grid-template-columns:300px 1fr 300px;column-gap:40px;row-gap:24px;max-width:1600px;margin:20px auto;padding:0 30px}
    main{display:flex;flex-direction:column;gap:20px}

    /* ì¢Œìš° ì‚¬ì´ë“œ */
    aside{background:var(--card);border-radius:14px;padding:20px;box-shadow:0 4px 12px rgba(0,0,0,.06);position:sticky;top:20px;height:500px;overflow-y:auto}
    aside h3{margin:0 0 12px;color:var(--accent);font-size:16px;font-weight:700}
    aside ul{margin:0;padding-left:18px}
    aside li{margin-bottom:6px}
    .aside-box{margin-bottom:20px;padding:12px;border-radius:10px;background:#fff}
    .aside-box h3{margin:0 0 10px;font-size:16px;font-weight:700;color:var(--accent)}

    /* íˆì–´ë¡œ */
    .hero{text-align:center;padding:40px;border-radius:16px;background:linear-gradient(135deg,#bbf7d0,#ecfdf5);box-shadow:0 6px 16px rgba(0,0,0,.08);margin:20px 0;animation:fadeIn .35s var(--e)}
    .hero h2{margin:0 0 14px;color:var(--accent);font-size:26px;font-weight:800}
    .hero p{font-size:16px;color:#374151}

    /* ìƒë‹¨ ë„¤ë¹„ ì¹´ë“œ */
    .nav-parts{display:flex;justify-content:center;gap:24px;margin:20px auto;flex-wrap:wrap}
    .nav-card{flex:1;min-width:150px;max-width:200px;background:linear-gradient(135deg,#dcfce7,#f0fdf4);padding:22px 16px;text-align:center;border-radius:16px;box-shadow:0 6px 14px rgba(0,0,0,.08);cursor:pointer;transition:transform .25s var(--e), box-shadow .25s var(--e)}
    .nav-card:hover{transform:translateY(-6px);box-shadow:0 10px 24px rgba(0,0,0,.12)}
    .nav-card .icon{font-size:28px;margin-bottom:10px}
    .nav-card h3{margin:0;font-size:18px;color:var(--accent);font-weight:700}

    /* í˜ì´ì§€(í™ˆ ë“±) */
    section.page{display:none;padding:28px;background:var(--card);border-radius:14px;box-shadow:0 4px 12px rgba(0,0,0,.05)}
    section.page.active{display:block;animation:pageIn .28s var(--e)}
    section h2{margin:0 0 16px;color:var(--accent);font-size:21px;font-weight:700}

    /* í™ˆ í•˜ìœ„ íƒ­ */
    .sub-nav{display:flex;gap:12px;margin:20px 0;flex-wrap:wrap}
    .sub-nav button{padding:10px 18px;border:none;border-radius:8px;background:var(--accent);color:#fff;font-size:15px;font-weight:600;cursor:pointer;transition:transform .18s var(--e), filter .18s var(--e)}
    .sub-nav button:hover{filter:brightness(.96); transform:translateY(-2px)}
    .sub-page{display:none;margin-top:16px}
    .sub-page.active{display:block;animation:fadeIn .25s var(--e)}

    /* í™ˆ ì¹´ë“œ */
    .card-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:20px;margin-top:16px}
    .card{background:#fff;border-radius:14px;padding:20px;box-shadow:0 4px 12px rgba(0,0,0,.08);transition:transform .25s var(--e),box-shadow .25s var(--e);cursor:pointer;text-align:center;border:2px solid transparent}
    .card:hover{transform:translateY(-6px);box-shadow:0 10px 24px rgba(0,0,0,.12)}
    .card .icon{font-size:30px;margin-bottom:12px}
    .card h4{margin:0 0 6px;font-size:17px;font-weight:700}
    .card p{margin:0;font-size:14.5px;color:#4b5563}
    .company-card{border-color:var(--company)} .company-card .icon,.company-card h4{color:var(--company)}
    .civil-card{border-color:var(--civil)} .civil-card .icon,.civil-card h4{color:var(--civil)}
    .org-card{border-color:var(--org)} .org-card .icon,.org-card h4{color:var(--org)}
    .magazine-card{border-color:var(--magazine)} .magazine-card .icon,.magazine-card h4{color:var(--magazine)}

    /* ì¹´í…Œê³ ë¦¬ í‘œ */
    #category table{width:100%;border-collapse:collapse;margin:16px 0 32px;font-size:16px}
    #category th,#category td{padding:14px 12px;border-bottom:1px solid var(--border);text-align:center}
    #category th{background:#e6f9ef;color:#065f46;font-size:17px}
    #category tr:nth-child(even) td{background:#f9fafb}
    #category tr:hover td{background:#dcfce7}
    #category h3{margin-top:40px;font-size:20px;color:var(--accent);font-weight:800;border-left:6px solid var(--accent);padding-left:10px}
    .quick-nav{display:flex;flex-wrap:wrap;gap:10px;margin:16px 0 24px}
    .quick-nav button{padding:8px 14px;border:none;border-radius:8px;background:var(--accent);color:#fff;font-size:14px;cursor:pointer;transition:transform .18s var(--e), filter .18s var(--e)}
    .quick-nav button:hover{filter:brightness(.96); transform:translateY(-2px)}

    /* ===== ğŸ”½ ì¶”ê°€: ì°¨ëŸ‰ íŒë§¤ ì‹œì„¸í‘œ ì¹´ë“œ + ì• ë‹ˆë©”ì´ì…˜ ===== */
    .car-sale-grid{
      display:grid;
      grid-template-columns:repeat(auto-fill,minmax(200px,1fr));
      gap:20px;
      margin-top:20px;
    }
    .car-card{
      background:#fff;
      border-radius:16px;
      padding:20px;
      box-shadow:0 6px 16px rgba(0,0,0,.08);
      text-align:center;
      cursor:pointer;
      transition:transform .25s var(--e), box-shadow .25s var(--e);
      border:2px solid transparent;
      animation:fadeInUp .4s ease forwards;
    }
    .car-card:hover{
      transform:translateY(-6px);
      box-shadow:0 10px 24px rgba(0,0,0,.12);
      border-color:var(--accent);
    }
    .car-card .icon{font-size:36px;margin-bottom:8px}
    .car-card h4{margin:0 0 6px;font-size:18px;font-weight:800;color:var(--accent)}
    .car-card .price{
      display:inline-block;
      background:#dcfce7;color:#065f46;font-weight:700;font-size:16px;
      padding:6px 14px;border-radius:50px
    }
    @keyframes fadeIn{from{opacity:0;transform:translateY(4px)} to{opacity:1;transform:none}}
    @keyframes pageIn{from{opacity:0;transform:translateY(8px)} to{opacity:1;transform:none}}
    @keyframes fadeInUp{from{opacity:0;transform:translateY(12px)} to{opacity:1;transform:none}}

  </style>
</head>

  <body>
  <header><h1 onclick="goHome()">ë–¡ìë°©ë²”ëŒ€ ì •ë³´ ì„¼í„°</h1></header>
  <div id="scrollProgress" aria-hidden="true"></div>

  <div class="layout">
    <!-- ì™¼ìª½ -->
    <aside>
      <div class="aside-box">
        <h3>ğŸ“¢ ê³µì§€ì‚¬í•­</h3>
        <ul>
          <li>ë–¡ìë°©ë²”ëŒ€ ì •ë³´ ì„¼í„° OPEN</li>
          <li>ë–¡ìë°©ë²”ëŒ€ íˆ¬ì ì„¼í„° ë¦¬ë‰´ì–¼</li>
          <li>ğŸ™ë¬¸ì˜: 703 ê¹€ë‚¨ì •, ë””ì½” dm</li>
        </ul>
      </div>
      <div class="aside-box">
        <h3>ğŸ‰ ë‹¤ê°€ì˜¤ëŠ” ì´ë²¤íŠ¸</h3>
        <ul>
          <li> ğŸ´ ì‘ë‘ í˜¸ìŠ¤íŠ¸ë°”</li>
          <li> ğŸ€ ë–¡ìë°©ë²”ëŒ€ ì´ë²¤íŠ¸</li>
          <li> ğŸ’ ì •ë¶€ì¥, ì›ë‘ ê²°í˜¼ì‹</li>
        </ul>
      </div>
    </aside>

    <!-- ì¤‘ì•™ -->
    <main>
      <div class="nav-parts">
        <div class="nav-card" onclick="showPage('home')"><div class="icon">ğŸ </div><h3>í™ˆ</h3></div>
        <div class="nav-card" onclick="showPage('car-market')"><div class="icon">ğŸš—</div><h3>ì°¨ëŸ‰ íŒë§¤í‘œ</h3></div>
        <div class="nav-card" onclick="showPage('category')"><div class="icon">ğŸ“‚</div><h3>ì¹´í…Œê³ ë¦¬</h3></div>
        <div class="nav-card" onclick="showPage('stats')"><div class="icon">ğŸ“ˆ</div><h3>ê±°ë˜ í†µê³„</h3></div>
      </div>

      <div class="hero"><h2>ğŸ“Š ì •ë³´ ì„¼í„°</h2><p>ë¦¬ì–¼ì›”ë“œì˜ ì•„ì´í…œ ì‹œì„¸ì™€ ì¡°ì§ ì •ë³´ë¥¼ í•œëˆˆì—!</p></div>

      <!-- í™ˆ -->
      <section id="home" class="page active">
        <h2>ğŸ  í™ˆ</h2>
        <div class="sub-nav">
          <button onclick="showSubPage('company')">ê¸°ì—…</button>
          <button onclick="showSubPage('civil')">ê³µë¬´ì›</button>
          <button onclick="showSubPage('org')">ì¡°ì§</button>
          <button onclick="showSubPage('magazine')">ë©”ê±°ì§„</button>
        </div>

        <!-- ê¸°ì—… -->
        <div id="company" class="sub-page active">
          <h3>ğŸ¢ ê¸°ì—…</h3>
          <div class="card-grid">
            <div class="card company-card" onclick="openEntity('company','beehive')">
              <div class="icon">ğŸ</div><h4>ë²Œì§‘</h4><p>-</p>
            </div>
            <div class="card company-card" onclick="openEntity('company','inback')">
              <div class="icon">ğŸ–</div><h4>InBack</h4><p>-</p>
            </div>
            <div class="card company-card" onclick="openEntity('company','chakani')">
              <div class="icon">ğŸ¦„</div><h4>ì°¨ì¹´ë‹ˆ</h4><p>-</p>
            </div>
            <div class="card company-card" onclick="openEntity('company','tteokleaf')">
              <div class="icon">ğŸ€</div><h4>ë–¡ìë°©ë²”ëŒ€</h4><p>-</p>
            </div>
          </div>
        </div>

        <!-- ê³µë¬´ì› -->
        <div id="civil" class="sub-page">
          <h3>ğŸ› ê³µë¬´ì›</h3>
          <div class="card-grid">
            <div class="card civil-card" onclick="openEntity('civil','ems')">
              <div class="icon">ğŸš‘</div><h4>EMS</h4><p>-</p>
            </div>
            <div class="card civil-card" onclick="openEntity('civil','southpd')">
              <div class="icon">ğŸ‘®</div><h4>ë‚¨ë¶€ê²½ì°°</h4><p>-</p>
            </div>
            <div class="card civil-card" onclick="openEntity('civil','northpd')">
              <div class="icon">ğŸš“</div><h4>ë¶ë¶€ê²½ì°°</h4><p>-</p>
            </div>
            <div class="card civil-card" onclick="openEntity('civil','castillo')">
              <div class="icon">ğŸš§</div><h4>ì¹´ìŠ¤í‹¸ë¡œ</h4><p>-</p>
            </div>
            <div class="card civil-card" onclick="openEntity('civil','broadcast')">
              <div class="icon">ğŸŒ</div><h4>ë°©ì†¡êµ­</h4><p>-</p>
            </div>
          </div>
        </div>

        <!-- ì¡°ì§ -->
        <div id="org" class="sub-page">
          <h3>ğŸ‘¥ ì¡°ì§</h3>
          <div class="card-grid">
            <div class="card org-card" onclick="openEntity('org','bigdick')">
              <div class="icon">ğŸŒ</div><h4>ë¹…ë”•</h4><p>-</p>
            </div>
            <div class="card org-card" onclick="openEntity('org','cheongryong')">
              <div class="icon">ğŸ’</div><h4>ì²­ë£¡</h4><p>-</p>
            </div>
            <div class="card org-card" onclick="openEntity('org','sakura')">
              <div class="icon">ğŸŒ¸</div><h4>ì‚¬ì¿ ë¼</h4><p>-</p>
            </div>
            <div class="card org-card" onclick="openEntity('org','jakdu')">
              <div class="icon">ğŸ´</div><h4>ì‘ë‘</h4><p>-</p>
            </div>
          </div>
        </div>

        <!-- ë©”ê±°ì§„ -->
        <div id="magazine" class="sub-page">
          <h3>ğŸ“° ë©”ê±°ì§„</h3>
          <div class="card-grid">
            <div class="card magazine-card">
              <div class="icon">ğŸš€</div><h4>ë¯¸ë˜ ê¸°ìˆ  íŠ¸ë Œë“œ</h4><p>AI, ë©”íƒ€ë²„ìŠ¤, ì¹œí™˜ê²½ ì‚°ì—…</p>
            </div>
          </div>
        </div>
      </section>

      <!-- ë¦¬ì–¼ ë°©ì†¡êµ­ (í™ˆ ì„¹ì…˜ ë°”ë¡œ ì•„ë˜, ê°™ì€ í­) -->
      <div id="broadcastBox">
        <div class="title-row">
          <h2>ğŸ“¡ ë¦¬ì–¼ ë°©ì†¡êµ­</h2>
          <span class="pill">ì‹¤ì‹œê°„ ì ‘ìˆ˜ Â· ìµëª… ê°€ëŠ¥</span>
        </div>
        <p class="desc">ì‚¬ì—°ì„ ë³´ë‚´ë©´ ìš´ì˜ì§„ í™•ì¸ í›„ ë°©ì†¡ìœ¼ë¡œ ì†Œê°œë¼ìš”. <span class="hint">* ë¡œê·¸ì¸ ì—†ì´ ìµëª… ì ‘ìˆ˜ ê°€ëŠ¥</span></p>

        <div class="broadcast-grid">
          <!-- ì‚¬ì—° ì‹ ì²­ -->
          <div class="story-card">
            <h3>ğŸ“ ì‚¬ì—° ì‹ ì²­</h3>
            <form id="storyForm" class="story-form" novalidate>
              <div class="row double">
                <label for="storyNick">ë³´ë‚´ëŠ” ë¶„</label>
                <input id="storyNick" type="text" placeholder="ë‹‰ë„¤ì„" />
                <input id="storyCode" type="text" placeholder="ê³ ë²ˆ (ì˜ˆ: 251)" />
              </div>

              <div class="row">
                <label for="storyCategory">ì¹´í…Œê³ ë¦¬</label>
                <select id="storyCategory" required>
                  <option value="" disabled selected>ì¹´í…Œê³ ë¦¬ë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                  <option>ì—°ì• </option><option>ìš°ì •</option><option>ì‚¬ê±´/ì‚¬ê³ </option><option>ì¼ìƒ</option>
                  <option>ì›ƒê¸´ ì¼</option><option>ê°ë™</option><option>ìŒì•…ì‚¬ì—°</option><option>ê¸°íƒ€</option>
                </select>
              </div>

              <div class="row">
                <label for="storyTitle">ì œëª©</label>
                <input id="storyTitle" type="text" placeholder="ì‚¬ì—° ì œëª©" maxlength="60" required />
              </div>

              <div class="row">
                <label for="storySong">ì‹ ì²­ê³¡</label>
                <input id="storySong" type="text" placeholder="ì˜ˆ: ì•„ì´ìœ  - ë°¤í¸ì§€ (ì„ íƒ)" />
              </div>

              <div class="row" style="align-items:start">
                <label for="storyBody">ë‚´ìš©</label>
                <textarea id="storyBody" placeholder="ì‚¬ì—° ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”" required></textarea>
              </div>

              <div class="row">
                <label>ìµëª…</label>
                <div class="inline">
                  <div id="anonSwitch" class="switch" role="switch" aria-checked="false" tabindex="0"></div>
                  <span class="hint">ìµëª…ìœ¼ë¡œ ë³´ë‚´ê¸°</span>
                </div>
              </div>

              <div class="row actions">
                <button type="submit" class="btn">ì‚¬ì—° ë³´ë‚´ê¸°</button>
              </div>
              <div id="storyMsg" class="hint" style="margin-top:4px" aria-live="polite"></div>
            </form>
          </div>

          <!-- ìµœì‹  ì‚¬ì—° -->
          <div class="story-list">
            <div class="head">
              <h3>ğŸ—‚ ìµœì‹  ì‚¬ì—°</h3>
              <div class="filters">
                <select id="storyFilter" class="pill">
                  <option value="">ì „ì²´</option>
                  <option>ì—°ì• </option><option>ìš°ì •</option><option>ì‚¬ê±´/ì‚¬ê³ </option><option>ì¼ìƒ</option>
                  <option>ì›ƒê¸´ ì¼</option><option>ê°ë™</option><option>ìŒì•…ì‚¬ì—°</option><option>ê¸°íƒ€</option>
                </select>
              </div>
            </div>
            <ul id="storyList"></ul>
          </div>
        </div>
      </div>
      <!-- /ë¦¬ì–¼ ë°©ì†¡êµ­ -->

      <!-- ì°¨ëŸ‰ íŒë§¤í‘œ (ì „ìš© í˜ì´ì§€) -->
      <section id="car-market" class="page">
        <div class="section-header">
          <h2>ğŸš— ì°¨ëŸ‰ íŒë§¤í‘œ</h2>
          <button class="help-pill" onclick="openHelp('market')">ì°¨ëŸ‰ íŒë§¤ ì•ˆë‚´</button>
        </div>
        <!-- âœ… JSì—ì„œ VEHICLE_CATALOGë¡œ ê° ì¹´í…Œê³ ë¦¬ í‘œ ìë™ ìƒì„± -->
        <div id="carTables"></div>
      </section>

      <!-- ì¹´í…Œê³ ë¦¬ -->
      <section id="category" class="page">
        <h2>ğŸ“‚ ì¹´í…Œê³ ë¦¬ë³„ ì‹œì„¸í‘œ</h2>
        <div class="quick-nav">
          <button onclick="scrollToSection('chair')">ğŸª‘ ì˜ì ì¢…ë¥˜</button>
          <button onclick="scrollToSection('support-car')">ğŸš— í›„ì› ì°¨ëŸ‰</button>
          <button onclick="scrollToSection('island-car')">ğŸ ê·¹ë½ë„ ì°¨ëŸ‰</button>
          <button onclick="scrollToSection('effect')">âœ¨ ì´í™íŠ¸</button>
          <button onclick="scrollToSection('skin')">ğŸ­ ìŠ¤í‚¨</button>
          <button onclick="scrollToSection('dance')">ğŸ’ƒ í–‰ë™Â·ëŒ„ìŠ¤Â·ë™ìƒ</button>
          <button onclick="scrollToSection('item')">âœ¨ ê¸°íƒ€</button>
          <button onclick="scrollToSection('car-sale')">ğŸš— ì°¨ëŸ‰ íŒë§¤ ì‹œì„¸í‘œ</button>
        </div>

        <h3 id="chair">ğŸª‘ ì˜ì ì¢…ë¥˜</h3>
        <table>
          <tr><th>ì•„ì´í…œ</th><th>ì‹œì„¸</th></tr>
          <tr><td>ë‹¬ì˜ì</td><td>230ì–µ~250ì–µ</td></tr>
          <tr><td>ì»¤í”¼ì˜ì</td><td>230ì–µ~250ì–µ</td></tr>
          <tr><td>ìƒˆì¥ì˜ì</td><td>160ì–µ~190ì–µ</td></tr>
          <tr><td>êµ¬ë¦„ì˜ì</td><td>270ì–µ~300ì–µ</td></tr>
        </table>

        <h3 id="support-car">ğŸš— í›„ì› ì°¨ëŸ‰</h3>
        <table>
          <tr><th>ì•„ì´í…œ</th><th>ì‹œì„¸</th></tr>
          <tr><td>M1</td><td>170ì–µ~200ì–µ</td></tr>
          <tr><td>ë¯¸ë‹ˆë°”í‹°</td><td>150ì–µ~180ì–µ</td></tr>
          <tr><td>ì´ê·¸ë„ˆìŠ¤</td><td>245ì–µ~270ì–µ</td></tr>
          <tr><td>M2</td><td>170ì–µ~200ì–µ</td></tr>
          <tr><td>ì‹œë…¸ë¹„</td><td>100ì–µ~120ì–µ</td></tr>
          <tr><td>ë„¤ë¡œ</td><td>230ì–µ~250ì–µ</td></tr>
          <tr><td>ì‡¼íƒ€ë¡œ</td><td>80ì–µ~100ì–µ</td></tr>
          <tr><td>M3</td><td>150ì–µ~200ì–µ</td></tr>
          <tr><td>í…Œì €ë™íŠ¸</td><td>270ì–µ~300ì–µ</td></tr>
          <tr><td>M4</td><td>170ì–µ~200ì–µ</td></tr>
          <tr><td>í•˜ì¿ ìµ¸ìš°</td><td>80ì–µ~110ì–µ</td></tr>
        </table>

        <h3 id="island-car">ğŸ ê·¹ë½ë„ ì°¨ëŸ‰</h3>
        <table>
          <tr><th>ì•„ì´í…œ</th><th>ì‹œì„¸</th></tr>
          <tr><td>ë°”ë‚˜ë‚˜ì¹´</td><td>60ì–µ~80ì–µ</td></tr>
          <tr><td>ê³ ì–‘ì¹´</td><td>70ì–µ~100ì–µ</td></tr>
          <tr><td>í”¼ë„›ì¹´</td><td>70ì–µ~100ì–µ</td></tr>
        </table>

        <h3 id="effect">âœ¨ ì´í™íŠ¸</h3>
        <table>
          <tr><th>ì•„ì´í…œ</th><th>ì‹œì„¸</th></tr>
          <tr><td>ë¶ˆì†</td><td>220ì–µ~270ì–µ</td></tr>
          <tr><td>ë¶ˆë°œ</td><td>200ì–µ~250ì–µ</td></tr>
          <tr><td>ë¦¬í”„</td><td>140ì–µ~180ì–µ</td></tr>
          <tr><td>ë²ˆê°œ</td><td>130ì–µ~150ì–µ</td></tr>
          <tr><td>ê½ƒìë¹„</td><td>250ì–µ~280ì–µ</td></tr>
        </table>

        <h3 id="skin">ğŸ­ ìŠ¤í‚¨</h3>
        <table>
          <tr><th>ì•„ì´í…œ</th><th>ì‹œì„¸</th></tr>
          <tr><td>ë‹¤ë‹ˆì—˜</td><td>200ì–µ~240ì–µ</td></tr>
          <tr><td>HJ</td><td>150ì–µ~200ì–µ</td></tr>
          <tr><td>YH</td><td>140ì–µ~180ì–µ</td></tr>
          <tr><td>ë‹¤í˜œ</td><td>80ì–µ~130ì–µ</td></tr>
          <tr><td>ìœ ì</td><td>80ì–µ~130ì–µ</td></tr>
          <tr><td>ë¬¸ì‹ ë‚¨</td><td>????</td></tr>
          <tr><td>ë³‘ì•„ë¦¬</td><td>150ì–µ~180ì–µ</td></tr>
          <tr><td>ê³ ì–‘ì´</td><td>150ì–µ~180ì–µ</td></tr>
        </table>

        <h3 id="dance">ğŸ’ƒ í–‰ë™Â·ëŒ„ìŠ¤Â·ë™ìƒ</h3>
        <table>
          <tr><th>ì•„ì´í…œ</th><th>ì‹œì„¸</th></tr>
          <tr><td>ë¸Œë ˆì´í¬ëŒ„ìŠ¤</td><td>10ì–µ~15ì–µ</td></tr>
          <tr><td>ì˜¤ì§•ì–´ëŒ„ìŠ¤</td><td>10ì–µ~15ì–µ</td></tr>
          <tr><td>ë¸Œë¡œí°ë ˆê·¸</td><td>5ì–µ~8ì–µ</td></tr>
          <tr><td>ë§ˆê·¸ë„¤í‹±</td><td>30ì–µ~45ì–µ</td></tr>
          <tr><td>í…”ë¯¸ëŒ„ìŠ¤</td><td>30ì–µ~40ì–µ</td></tr>
          <tr><td>ë²„ìŠ¤ì•ˆì—ì„œëŒ„ìŠ¤</td><td>6ì–µ~8ì–µ</td></tr>
          <tr><td>ìŠ¤ë§ˆíŠ¸ëŒ„ìŠ¤</td><td>30ì–µ~38ì–µ</td></tr>
          <tr><td>ì†Œë‹¤íŒëŒ„ìŠ¤</td><td>38ì–µ~46ì–µ</td></tr>
          <tr><td>íŒí•€ëŒ„ìŠ¤</td><td>5ì–µ~10ì–µ</td></tr>
          <tr><td>ìŠ¤ìº‡ì•¤ì ¤ë‹¤ëŒ„ìŠ¤</td><td>20ì–µ~28ì–µ</td></tr>
          <tr><td>ë»£ë»£ë¡œë´‡ëŒ„ìŠ¤</td><td>6ì–µ~10ì–µ</td></tr>
          <tr><td>ê³¨ë°˜í”ë“¤ê¸°</td><td>15ì–µ~20ì–µ</td></tr>
          <tr><td>í¬ë ˆì´ì§€íŠ¸ì›Œí‚¹</td><td>15ì–µ~20ì–µ</td></tr>
          <tr><td>ìŠ¬ë¦­ë°±</td><td>18ì–µ~27ì–µ</td></tr>
          <tr><td>ì´ë¦¬ì™€</td><td>5ì–µ~8ì–µ</td></tr>
          <tr><td>ì–¸ë”ë”ì”¨</td><td>5ì–µ~8ì–µ</td></tr>
          <tr><td>ìŒë»í</td><td>10ì–µ~15ì–µ</td></tr>
          <tr><td>ë§˜ë§˜</td><td>7ì–µ~11ì–µ</td></tr>
          <tr><td>íšŒì „íšŒì˜¤ë¦¬</td><td>18ì–µ~24ì–µ</td></tr>
          <tr><td>ì˜ë¦¬ëŒ„ìŠ¤</td><td>5ì–µ~10ì–µ</td></tr>
          <tr><td>í•˜íŠ¸ ë™ìƒí¬ì¦ˆ(ë‚¨)</td><td>10ì–µ~15ì–µ</td></tr>
          <tr><td>í•˜íŠ¸ ë™ìƒí¬ì¦ˆ(ì—¬)</td><td>11ì–µ~16ì–µ</td></tr>
          <tr><td>ë™ìƒí¬ì¦ˆ(ë‚¨)</td><td>10ì–µ~15ì–µ</td></tr>
          <tr><td>ë™ìƒí¬ì¦ˆ(ì—¬)</td><td>11ì–µ~15ì–µ</td></tr>
          <tr><td>ë¬´ë¦ì•‰ê¸°</td><td>7ì–µ~10ì–µ</td></tr>
          <tr><td>ì¡°ì‹ í•˜ê²Œ ì•‰ê¸°</td><td>8ì–µ~10ì–µ</td></tr>
          <tr><td>ê´´ì†ì§ˆì£¼</td><td>10ì–µ~13ì–µ</td></tr>
          <tr><td>í”ë“¤ì–´</td><td>15ì–µ~18ì–µ</td></tr>
          <tr><td>ì˜¤ì˜ˆìŠ¤</td><td>9ì–µ~15ì–µ</td></tr>
          <tr><td>ìš”ê°€í¬ì¦ˆ</td><td>13ì–µ~16ì–µ</td></tr>
          <tr><td>ëƒ„ìƒˆë‚˜</td><td>10ì–µ~15ì–µ</td></tr>
          <tr><td>ì“°ëŸ¬ì§€ê¸°</td><td>5ì–µ~7ì–µ</td></tr>
          <tr><td>ê¸°ë„í•˜ëŠ”</td><td>5ì–µ~10ì–µ</td></tr>
          <tr><td>ë‚´ë¹µë…ì´</td><td>5ì–µ~8ì–µ</td></tr>
        </table>

        <!-- ì¹´í…Œê³ ë¦¬ ë‚´ â€œì°¨ëŸ‰ íŒë§¤ ì‹œì„¸í‘œâ€(ìš”ì•½ ì¹´ë“œ) â€” JSê°€ ì±„ì›€ -->
        <h3 id="car-sale">ğŸš— ì°¨ëŸ‰ íŒë§¤ ì‹œì„¸í‘œ</h3>
        <div class="car-sale-grid" id="carSaleCards"></div>
      </section>

      <!-- ê±°ë˜ í†µê³„ -->
      <section id="stats" class="page">
        <h2>ğŸ“ˆ ê±°ë˜ í†µê³„</h2>
        <table id="itemTable">
          <thead><tr><th>ì•„ì´í…œ</th><th>ê±°ë˜ëŸ‰</th><th>í‰ê· ê°€</th><th>ë³€ë™</th></tr></thead>
          <tbody></tbody>
        </table>
      </section>
    </main>

    <!-- ì˜¤ë¥¸ìª½ -->
    <aside>
      <h3>ğŸ”¥ ì¸ê¸° TOP 5</h3>
      <ul id="topList"></ul>
      <h3>â° ì‹¤ì‹œê°„ ì•Œë¦¼</h3>
      <ul><li>-</li></ul>
    </aside>
  </div>

  <!-- ì—”í‹°í‹° ëª¨ë‹¬ -->
  <div id="modal" class="modal" aria-hidden="true">
    <div id="modalContent" class="modal-content" role="dialog" aria-modal="true">
      <button class="close-btn" onclick="closeModal()">ë‹«ê¸°</button>
      <h3 id="modalTitle"></h3>
      <p id="modalTagline" class="modal-tagline"></p>
      <div class="modal-nav">
        <button data-tab="org" onclick="showModalTab('org')">ì¡°ì§ë„</button>
        <button data-tab="products" onclick="showModalTab('products')">íŒë§¤ë¬¼í’ˆ</button>
        <button data-tab="info" onclick="showModalTab('info')">ê¸°ì—…ì •ë³´</button>
      </div>
      <div id="modal-org" class="modal-tab">
        <ul id="modalOrgList" class="org-list"></ul>
      </div>
      <div id="modal-products" class="modal-tab">
        <ul id="modalProdList"></ul>
      </div>
      <div id="modal-info" class="modal-tab"><p id="modalInfoText"></p></div>
    </div>
  </div>

  <!-- ì‚¬ì—° ìƒì„¸ ëª¨ë‹¬ -->
  <div id="storyModal" class="modal" aria-hidden="true">
    <div class="modal-content bg-broadcast" role="dialog" aria-modal="true">
      <button class="close-btn" onclick="closeStory()">ë‹«ê¸°</button>
      <h3 id="sModalTitle">ì‚¬ì—° ì œëª©</h3>
      <p class="modal-tagline" id="sModalMeta">ì‘ì„±ì Â· ì‹œê°„</p>
      <div class="help-body">
        <div class="help-view" id="sModalBody" style="white-space:pre-wrap"></div>
        <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
          <span class="badge" id="sModalCat">ì¹´í…Œê³ ë¦¬</span>
          <span class="badge" id="sModalSong" style="display:none"></span>
        </div>
      </div>
    </div>
  </div>

  <!-- ë„ì›€ë§ ëª¨ë‹¬ -->
  <div id="helpModal" class="modal" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true">
      <button class="close-btn" onclick="closeHelp()">ë‹«ê¸°</button>
      <h3 id="helpTitle">ë„ì›€ë§</h3>
      <p class="modal-tagline" id="helpTagline">ì•ˆë‚´</p>
      <div class="help-body">
        <div id="helpContent" class="help-view"></div>
      </div>
    </div>
  </div>

  <!-- ì°¨ëŸ‰ ìƒì„¸ ëª¨ë‹¬ -->
  <div id="carModal" class="modal" aria-hidden="true">
    <div class="modal-content" role="dialog" aria-modal="true">
      <button class="close-btn" onclick="closeCarModal()">ë‹«ê¸°</button>
      <h3 id="carModalTitle">ì°¨ëŸ‰ëª…</h3>
      <p id="carModalPrice" class="modal-tagline">ê°€ê²© ì •ë³´</p>
      <div id="carModalDesc" style="line-height:1.8">ì„¸ë¶€ ì„¤ëª…ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
    </div>
  </div>

    <script>
/* ---------- ENTITIES: ê¸°ì—…Â·ê³µë¬´ì›Â·ì¡°ì§ ë°ì´í„° ---------- */
const ENTITIES = {
  company: {
    beehive: { name: "ë²Œì§‘", tagline: "â€œ - â€", info: "ì§€ì—­ ì»¤ë®¤ë‹ˆí‹° ê¸°ë°˜ ì •ë³´Â·ê±°ë˜ í—ˆë¸Œë¥¼ ì§€í–¥í•©ë‹ˆë‹¤.", products: [], org: [] },
    tteokleaf: { name: "ë–¡ìë°©ë²”ëŒ€", tagline: "â€œë–¡ìì—ì„œ ì‹œì‘í•´ ë°©íƒ„ì²˜ëŸ¼ ì§€ì¼œë‚¸ë‹¤.â€", info: "ì§€ì—­ ì»¤ë®¤ë‹ˆí‹° ê¸°ë°˜ ì •ë³´Â·ê±°ë˜ í—ˆë¸Œë¥¼ ì§€í–¥í•©ë‹ˆë‹¤.", products: [], org: [] },
    inback: { name: "InBack", tagline: "â€œì´ ìŠ¤í…Œì´í¬ê°€ ì‹ê¸° ì „ì— ëŒì•„ì˜¬ê²Œ.â€", info: "ë°ì´í„° ë¶„ì„ê³¼ ìë™í™”ë¥¼ í†µí•´ ì˜ì‚¬ê²°ì •ì„ ì§€ì›í•©ë‹ˆë‹¤.", products: [], org: [] },
    chakani: { name: "ì°¨ì¹´ë‹ˆ", tagline: "â€œì°¨ì¹´ë‹ˆ ê±´ë“¤ë©´ ì•ˆì°©í•˜ë‹¤!!â€", info: "ì‹ ë¢° ê¸°ë°˜ì˜ ì¤‘ê³ Â·í•œì •íŒ ê±°ë˜ í”Œë«í¼.", products: [], org: [] }
  },
  civil: {
    ems: { name: "EMS", tagline: "â€œìš°ë¦¬ì˜ ì¶œë™ í•˜ë‚˜ê°€, ì„œë²„ ë¶„ìœ„ê¸°ë¥¼ ë°”ê¾¼ë‹¤.â€", info: "ì‘ê¸‰ì˜ë£Œì™€ ì¬ë‚œ ê³¨ë“ íƒ€ì„ì„ ì±…ì„ì§‘ë‹ˆë‹¤.", products: [], org: [] },
    southpd: { name: "ë‚¨ë¶€ê²½ì°°", tagline: "â€œì‹œë¯¼ì„ ìœ„í•œ ê°€ì¥ ê°€ê¹Œìš´ í˜â€", info: "", products: [], org: [] },
    northpd: { name: "ë¶ë¶€ê²½ì°°", tagline: "â€œë„ë§ì³ë´ì•¼ ì†Œìš©ì—†ë‹¤~ ë¶ë¶€ê²½ì°° ì¶œë™ì´ë‹¤!â€ ğŸš“âœ¨", info: "", products: [], org: [] },
    castillo: { name: "ì¹´ìŠ¤í‹¸ë¡œ", tagline: "â€œì—”ì§„ì€ ë©ì–´ë„ ì¹´ìŠ¤í‹¸ë¡œëŠ” ë©ì§€ ì•ŠëŠ”ë‹¤.â€", info: "", products: [], org: [] },
    broadcast: { name: "ë°©ì†¡êµ­", tagline: "â€œì‹œì‘ì€ ë¯¸ì•½í•´ë„ ëì€ ë¯¼ì¤‘ì´ë‹¤.â€", info: "", products: [], org: [] }
  },
  org: {
    bigdick: { name: "ë¹…ë”•", tagline: "â€œí¬ê¸°ëŠ” ìš°ì—°ì´ì§€ë§Œ, ìœ„ëŒ€í•¨ì€ ì„ íƒì´ë‹¤.â€", info: "", products: [], org: [] },
    cheongryong: { name: "ì²­ë£¡", tagline: "â€œì²œìƒì²œí•˜ ìœ ì•„ë…ì¡´, ì²­ë£¡ì´ í•˜ëŠ˜ë¡œ ì„œê² ë‹¤.â€", info: "", products: [], org: [] },
    sakura: { name: "ì‚¬ì¿ ë¼", tagline: "â€œë²šê½ƒì€ ë§Œê°œí•  ë•Œ í™”ë ¤í•œ ë²•ì´ë‹¤.â€", info: "", products: [], org: [] },
    jakdu: { name: "ì‘ë‘", tagline: "â€œì™€ì‹ ìƒë‹´(è‡¥è–ªå˜—è†½)â€", info: "", products: [], org: [] }
  }
};

/* ---------- VEHICLE_CATALOG: ì°¨ëŸ‰ íŒë§¤ ì‹œì„¸í‘œ ë°ì´í„° ---------- */
const VEHICLE_CATALOG = {
  "ì˜¤í”„ë¡œë“œ": [
    { name: "ë””ë¡œë”", price: "1,500,000,000ì›", note: "2ì¸ìŠ¹" },
    { name: "ì—ë²„ì˜¨", price: "1,500,000,000ì›", note: "4ì¸ìŠ¹" },
    { name: "ìš”ì„¸ë¯¸í„°3", price: "1,500,000,000ì›", note: "2ì¸ìŠ¹" },
    { name: "ë©”ì‚¬", price: "1,620,000,000ì›", note: "4ì¸ìŠ¹" },
    { name: "ë“€ë¸ŒìŠ¤íƒ€", price: "2,540,000,000ì›", note: "4ì¸ìŠ¹" },
    { name: "í”„ë¦¬í¬ë¡¤ëŸ¬", price: "3,670,000,000ì›", note: "4ì¸ìŠ¹" }
  ],
  "ë¨¸ìŠ¬ì¹´": [
    { name: "íƒíŒŒ2", price: "2,840,000,000ì›", note: "2ì¸ìŠ¹" }
  ],
  "ë°´": [
    { name: "ë°˜ìº£XL", price: "1,500,000,000ì›", note: "4ì¸" },
    { name: "ë¶€ë¦¬í† ", price: "1,500,000,000ì›", note: "6ì¸" },
    { name: "ì„œë²„", price: "2,620,000,000ì›", note: "6ì¸" }
  ],
  "ìŠ¤í¬ì¸ ì¹´": [
    { name: "ì—˜ë¦¬ì§€2", price: "1,520,000,000ì›" },
    { name: "ì½”ê·¸ë¸Œë¦¬ì˜¤", price: "1,680,000,000ì›" },
    { name: "ì¬ì¹¼", price: "1,740,000,000ì›" },
    { name: "ë¯¸ì‰˜ë¦¬", price: "1,750,000,000ì›" },
    { name: "ë²„íŒ”ë¡œ", price: "1,800,000,000ì›" },
    { name: "ë²„íŒ”ë¡œ2", price: "1,820,000,000ì›" },
    { name: "ë²„íŒ”ë¡œ3", price: "1,840,000,000ì›" },
    { name: "GB200", price: "1,680,000,000ì›" },
    { name: "ì¬ìŠ¤í„°3", price: "1,900,000,000ì›" },
    { name: "ë§ˆì‚¬í¬ë¡œ", price: "1,920,000,000ì›" },
    { name: "ë§ˆì‚¬í¬ë¡œ2", price: "1,940,000,000ì›" },
    { name: "ë² ìŠ¤íŠ¸ì•„GTS", price: "2,520,000,000ì›" },
    { name: "í ë¡ ", price: "2,600,000,000ì›" },
    { name: "íŠ¸ë¡œí¬ìŠ¤", price: "2,660,000,000ì›" },
    { name: "ìŠ¬ë¼ê²", price: "2,880,000,000ì›" },
    { name: "ì½”ë©§3", price: "2,900,000,000ì›" },
    { name: "ë°±íŠ¸ë ˆ", price: "2,920,000,000ì›" },
    { name: "ë“œë˜í”„í„°", price: "2,940,000,000ì›" },
    { name: "ì£¼ê¸€ëŸ¬", price: "2,960,000,000ì›" },
    { name: "íŒ¡í…Œë¥´", price: "3,700,000,000ì›" },
    { name: "í ë¥¸2", price: "3,730,000,000ì›" },
    { name: "íŒŒë¦¬ì•„", price: "3,790,000,000ì›" },
    { name: "ë„¤ì˜¨", price: "3,970,000,000ì›" }
  ],
  "í´ë˜ì‹": [
    { name: "í† ë¥´ë„¤ì´ë„", price: "1,560,000,000ì›" },
    { name: "í† ë‚˜ë„5", price: "1,580,000,000ì›" },
    { name: "í† ë„¤ì´ë„6", price: "1,600,000,000ì›" },
    { name: "ë””ì´ë„ˆìŠ¤í‹°", price: "1,760,000,000ì›" },
    { name: "Z190", price: "1,880,000,000ì›" },
    { name: "GT500", price: "1,960,000,000ì›" },
    { name: "ì½”ì¼“2", price: "1,980,000,000ì›" },
    { name: "ì½”ì¼“5", price: "2,000,000,000ì›" },
    { name: "ì¸í¼ë„ˆìŠ¤2", price: "2,580,000,000ì›" }
  ],
  "ì„¸ë‹¨": [
    { name: "ì½•55", price: "1,540,000,000ì›" },
    { name: "ìŠ¤íƒœí¬ë“œ", price: "1,700,000,000ì›" },
    { name: "ë¼ì¸í•˜íŠ¸", price: "2,800,000,000ì›" },
    { name: "ì¹œí€˜ë°€ë¼", price: "3,910,000,000ì›" }
  ],
  "ìŠˆí¼ì¹´": [
    { name: "í˜ë„¤íŠ¸ë ˆì´í„°", price: "2,680,000,000ì›" },
    { name: "GP1", price: "2,980,000,000ì›" },
    { name: "ì¹˜íƒ€2", price: "3,000,000,000ì›" },
    { name: "ëª°ë¦­", price: "3,820,000,000ì›" },
    { name: "ë°”ì¹´", price: "3,850,000,000ì›" },
    { name: "ì¸í¼ë„ˆìŠ¤", price: "3,940,000,000ì›" },
    { name: "ë°˜ì‹œ2", price: "4,000,000,000ì›" }
  ],
  "SUV": [
    { name: "ê·¸ë ˆìŠ¬ë¦¬", price: "1,640,000,000ì›" },
    { name: "FQ2", price: "1,660,000,000ì›" },
    { name: "íŒí‹€ë¦¬", price: "1,720,000,000ì›" },
    { name: "ë”ë¸ŒìŠ¤íƒ€2", price: "2,560,000,000ì›" },
    { name: "ì´ì‹œ8", price: "2,700,000,000ì›" },
    { name: "ë°œëŸ¬3", price: "2,720,000,000ì›" },
    { name: "ë°œëŸ¬4", price: "2,740,000,000ì›" },
    { name: "ë°œëŸ¬7", price: "2,760,000,000ì›" },
    { name: "í•« ë§ ì—ë°”ë¡ ", price: "2,780,000,000ì›" },
    { name: "ë…¸ë°•", price: "2,820,000,000ì›" },
    { name: "ë¹„ë°˜ë‚˜ì´íŠ¸", price: "3,760,000,000ì›" },
    { name: "ì—ìŠ¤íŠ¸ë¡ ", price: "3,880,000,000ì›" },
    { name: "í•˜ë°”ë„¤ë¡œ", price: "5,000,000,000ì›" }
  ],
  "ì†Œí˜•": [
    { name: "ì´ì”¨í´ë˜ì‹", price: "1,500,000,000ì›" },
    { name: "ë¸Œë¦¬ì˜¤ì†Œ", price: "2,640,000,000ì›" }
  ]
};
</script>

    <script>
/* ---------- ì°¨ëŸ‰ íŒë§¤ ì‹œì„¸í‘œ HTML ìë™ ìƒì„± ---------- */
function renderVehicleCatalog(){
  const carSection = document.querySelector('#car-sale'); // ì¹´í…Œê³ ë¦¬ ë‚´ ì°¨ëŸ‰ íŒë§¤ ì‹œì„¸í‘œ ì„¹ì…˜
  if(!carSection) return;

  // ê¸°ì¡´ ë‚´ìš© ì œê±°
  const oldGrid = carSection.querySelector('.car-sale-grid');
  if(oldGrid) oldGrid.remove();

  // ìƒˆ ì»¨í…Œì´ë„ˆ
  const grid = document.createElement('div');
  grid.className = 'car-sale-grid';

  // ì¹´í…Œê³ ë¦¬ë³„ ë°˜ë³µ
  Object.keys(VEHICLE_CATALOG).forEach(category=>{
    const cars = VEHICLE_CATALOG[category];
    // ì¹´í…Œê³ ë¦¬ ì œëª© ì¶”ê°€
    const h3 = document.createElement('h3');
    h3.textContent = 'ğŸš— ' + category;
    h3.style.gridColumn = '1/-1';
    h3.style.fontSize = '20px';
    h3.style.fontWeight = '800';
    h3.style.marginTop = '40px';
    grid.appendChild(h3);

    cars.forEach(car=>{
      const card = document.createElement('div');
      card.className = 'car-card';
      card.dataset.car = car.name;
      card.innerHTML = `
        <div class="icon">ğŸš˜</div>
        <h4>${car.name}</h4>
        <p class="price">${car.price}</p>
        ${car.note?`<p style="font-size:13px;color:#6b7280;margin:4px 0 0">${car.note}</p>`:""}
      `;
      grid.appendChild(card);
    });
  });

  carSection.appendChild(grid);
}

/* ---------- ì°¨ëŸ‰ ìƒì„¸ ëª¨ë‹¬ ---------- */
function openCarModal(){
  const modal = document.getElementById('carModal');
  modal.classList.add('show');
  modal.setAttribute('aria-hidden','false');
  document.body.style.overflow='hidden';
}
function closeCarModal(){
  const modal = document.getElementById('carModal');
  modal.classList.remove('show');
  modal.setAttribute('aria-hidden','true');
  document.body.style.overflow='';
}

/* ---------- ì°¨ëŸ‰ ì¹´ë“œ í´ë¦­ ì´ë²¤íŠ¸ ---------- */
document.addEventListener('click', e=>{
  const card = e.target.closest('.car-card');
  if(!card) return;
  const name = card.dataset.car;

  // VEHICLE_CATALOG ì—ì„œ í•´ë‹¹ ì°¨ëŸ‰ ì°¾ê¸°
  let found=null;
  for(const cat in VEHICLE_CATALOG){
    const arr=VEHICLE_CATALOG[cat];
    const car=arr.find(c=>c.name===name);
    if(car){found=car;break;}
  }

  document.getElementById('carModalTitle').textContent = found?.name || 'ì°¨ëŸ‰';
  document.getElementById('carModalPrice').textContent = 'ê°€ê²©: ' + (found?.price || '-');
  document.getElementById('carModalDesc').textContent = found?.note || 'ì„¸ë¶€ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.';
  openCarModal();
});

/* ---------- í˜ì´ì§€ ë¡œë”© ì‹œ ì‹¤í–‰ ---------- */
document.addEventListener('DOMContentLoaded', ()=>{
  renderVehicleCatalog();
});
</script>

    <!-- ===== Firebase + Firestore (ì‚¬ì—° ì‹ ì²­ + ëª©ë¡) ===== -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-analytics.js";
  import { getFirestore, collection, addDoc, serverTimestamp, query, orderBy, limit, onSnapshot } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-firestore.js";
  import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyBQt_sPa5B4rHWAHTn9piQ6mYYmTDpxykM",
    authDomain: "information-5461a.firebaseapp.com",
    projectId: "information-5461a",
    storageBucket: "information-5461a.firebasestorage.app",
    messagingSenderId: "1051085585657",
    appId: "1:1051085585657:web:c9b43d1b000aa30a233628",
    measurementId: "G-2VD58S8V9C"
  };

  const app = initializeApp(firebaseConfig);
  try { getAnalytics(app); } catch(e){}
  const db = getFirestore(app);
  const auth = getAuth(app);

  signInAnonymously(auth).catch(console.error);

  const storiesRef = collection(db, "stories");

  /* ---- í¼ ì—˜ë¦¬ë¨¼íŠ¸ ---- */
  const storyForm = document.getElementById("storyForm");
  const storyNick = document.getElementById("storyNick");
  const storyCode = document.getElementById("storyCode");
  const storyTitle = document.getElementById("storyTitle");
  const storyBody = document.getElementById("storyBody");
  const storyMsg  = document.getElementById("storyMsg");
  const storySong = document.getElementById("storySong");
  const storyCategory = document.getElementById("storyCategory");
  const anonSwitch = document.getElementById("anonSwitch");
  const storyList = document.getElementById("storyList");
  const storyFilter = document.getElementById("storyFilter");

  /* ---- ìµëª… ìŠ¤ìœ„ì¹˜ ---- */
  function setAnon(active){
    anonSwitch.classList.toggle('active', !!active);
    anonSwitch.setAttribute('aria-checked', active ? 'true' : 'false');
    updateAnonUI();
  }
  function updateAnonUI(){
    const anon = anonSwitch.classList.contains('active');
    [storyNick, storyCode].forEach((el)=>{
      el.disabled = anon;
      if(anon) el.value = '';
      if(el === storyNick) el.placeholder = anon ? 'ìµëª… ëª¨ë“œ' : 'ë‹‰ë„¤ì„';
      if(el === storyCode) el.placeholder = anon ? 'ìµëª… ëª¨ë“œ' : 'ê³ ë²ˆ (ì˜ˆ: 251)';
    });
  }
  setAnon(false);
  updateAnonUI();
  anonSwitch.addEventListener('click', ()=> setAnon(!anonSwitch.classList.contains('active')));
  anonSwitch.addEventListener('keydown', (e)=>{ if(e.key===' '||e.key==='Enter'){ e.preventDefault(); setAnon(!anonSwitch.classList.contains('active')); }});

  /* ---- ì œì¶œ ---- */
  storyForm?.addEventListener("submit", async (e)=>{
    e.preventDefault();
    const isAnon = anonSwitch.classList.contains('active');
    const nick  = isAnon ? "" : (storyNick.value||"").trim();
    const code  = isAnon ? "" : (storyCode.value||"").trim();
    const title = (storyTitle.value||"").trim();
    const body  = (storyBody.value||"").trim();
    const song  = (storySong.value||"").trim();
    const category = storyCategory.value || "";

    if(!title || !body || !category){
      storyMsg.textContent = "ì¹´í…Œê³ ë¦¬/ì œëª©/ë‚´ìš©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.";
      storyMsg.style.color = "#dc2626";
      return;
    }
    if(!isAnon && !nick && !code){
      storyMsg.textContent = "ìµëª…ì´ ì•„ë‹ˆë©´ ë‹‰ë„¤ì„ ë˜ëŠ” ê³ ë²ˆì„ ì…ë ¥í•˜ì„¸ìš”.";
      storyMsg.style.color = "#dc2626";
      return;
    }

    storyForm.querySelector("button[type=submit]").disabled = true;
    storyMsg.textContent = "ì „ì†¡ ì¤‘...";
    storyMsg.style.color = "#6b7280";
    try{
      await addDoc(storiesRef, { isAnon, nick, code, title, body, song, category, createdAt: serverTimestamp() });
      storyMsg.textContent = "ì‚¬ì—°ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤! ê°ì‚¬í•©ë‹ˆë‹¤.";
      storyMsg.style.color = "#16a34a";
      storyTitle.value = "";
      storyBody.value = "";
      storySong.value = "";
    }catch(err){
      storyMsg.textContent = "ì‚¬ì—° ì „ì†¡ ì‹¤íŒ¨: " + (err?.message||err);
      storyMsg.style.color = "#dc2626";
    }finally{
      storyForm.querySelector("button[type=submit]").disabled = false;
    }
  });

  /* ---- ìµœì‹  ì‚¬ì—° êµ¬ë… + ë Œë”ëŸ¬ ---- */
  const storyMap = new Map();
  function fmtTime(ts){
    try{
      const d = ts?.toDate ? ts.toDate() : (ts instanceof Date ? ts : new Date());
      const y = d.getFullYear(), m = ('0'+(d.getMonth()+1)).slice(-2), da=('0'+d.getDate()).slice(-2);
      const hh=('0'+d.getHours()).slice(-2), mm=('0'+d.getMinutes()).slice(-2);
      return `${y}.${m}.${da} ${hh}:${mm}`;
    }catch{ return ""; }
  }

  function renderStoryList(){
    const filterCat = storyFilter?.value || "";
    const all = Array.from(storyMap.values());
    const arr = all.filter(s=> !filterCat || s.category === filterCat);

    if(arr.length===0){
      storyList.innerHTML = `<li class="story-empty">ì•„ì§ ë“±ë¡ëœ ì‚¬ì—°ì´ ì—†ìŠµë‹ˆë‹¤.</li>`;
      return;
    }
    storyList.innerHTML = arr.map(s=>{
      const who  = s.isAnon ? 'ìµëª…' : (s.nick || 'â€”');
      const code = (!s.isAnon && s.code) ? ` (${s.code})` : '';
      const song = s.song ? ` Â· ğŸµ ${s.song}` : '';
      return `
        <li class="story-item" data-id="${s.id}">
          <div class="left">
            <span class="badge">${s.category||'ê¸°íƒ€'}</span>
            <div style="display:flex;flex-direction:column;min-width:0">
              <div class="title">${s.title||'(ì œëª© ì—†ìŒ)'}</div>
              <div class="meta">${who}${code} Â· ${s._time || ''}${song}</div>
            </div>
          </div>
          <div class="meta">ë³´ê¸° â–¸</div>
        </li>
      `;
    }).join('');

    storyList.querySelectorAll('.story-item').forEach(li=>{
      li.addEventListener('click', ()=> openStory(li.getAttribute('data-id')));
    });
  }

  const qLatest = query(storiesRef, orderBy('createdAt','desc'), limit(50));
  onSnapshot(qLatest, (snap)=>{
    storyMap.clear();
    snap.forEach(doc=>{
      const s = { id: doc.id, ...doc.data() };
      s._time = s.createdAt ? fmtTime(s.createdAt) : '';
      storyMap.set(s.id, s);
    });
    renderStoryList();
  });

  storyFilter?.addEventListener('change', renderStoryList);
</script>
</body>
</html>
